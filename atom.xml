<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>田彬的博客园</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tianbin.org/"/>
  <updated>2019-06-29T07:13:56.015Z</updated>
  <id>https://tianbin.org/</id>
  
  <author>
    <name>NibNait&amp;nbsp&amp;nbsp</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World Mac版</title>
    <link href="https://tianbin.org/hello-world/"/>
    <id>https://tianbin.org/hello-world/</id>
    <published>2019-06-29T07:13:56.015Z</published>
    <updated>2019-06-29T07:13:56.015Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装node"><a href="#安装node" class="headerlink" title="安装node"></a>安装node</h1><p><a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a></p><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><blockquote><p>npm -v<br>node -v</p></blockquote><a id="more"></a><h1 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h1><blockquote><p>sudo npm install hexo –save<br>sudo npm install -g hexo</p></blockquote><h1 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h1><blockquote><p>hexo -v</p></blockquote><h1 id="初始化hexo"><a href="#初始化hexo" class="headerlink" title="初始化hexo"></a>初始化hexo</h1><blockquote><p>mkdir hexo<br>cd hexo<br>hexo init  </p></blockquote><p>Install dependencies时，出现了一些mkdir权限的问题，日志提示要手动npm install</p><blockquote><p>sudo npm install</p></blockquote><blockquote><p>hexo generate</p></blockquote><p>在Hexo 3.0 后server被单独出来了，需要安装server</p><blockquote><p>sudo npm install hexo-server -save<br>sudo npm install hexo-deployer-git –save</p></blockquote><h1 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h1><blockquote><p>hexo s</p></blockquote><h1 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h1><blockquote><p>hexo d -g</p></blockquote><h1 id="安装调试主题"><a href="#安装调试主题" class="headerlink" title="安装调试主题"></a>安装调试主题</h1><p>参考：</p><ul><li><a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">https://www.jianshu.com/p/9f0e90cc32c2</a></li><li><a href="http://eternalzttz.com/hexo-next.html" target="_blank" rel="noopener">http://eternalzttz.com/hexo-next.html</a><h2 id="修改网站图标-favicon"><a href="#修改网站图标-favicon" class="headerlink" title="修改网站图标 favicon"></a>修改网站图标 favicon</h2><h2 id="修改菜单栏"><a href="#修改菜单栏" class="headerlink" title="修改菜单栏"></a>修改菜单栏</h2><blockquote><p>hexo new page “tags”</p></blockquote></li></ul><h2 id="去-themes-next-source-tags的index-md文件中，添加type-“tags”"><a href="#去-themes-next-source-tags的index-md文件中，添加type-“tags”" class="headerlink" title="去/themes/next/source/tags的index.md文件中，添加type: “tags”"></a>去/themes/next/source/tags的index.md文件中，添加type: “tags”</h2><h2 id="打开github-banner"><a href="#打开github-banner" class="headerlink" title="打开github_banner"></a>打开github_banner</h2><h2 id="添加RSS"><a href="#添加RSS" class="headerlink" title="添加RSS"></a>添加RSS</h2><pre><code>&gt; npm install hexo-generator-feed --save</code></pre><p>  在/_config.yml 中添加 plugins: hexo-generate-feed</p><h2 id="修改底部标签样式"><a href="#修改底部标签样式" class="headerlink" title="修改底部标签样式"></a>修改底部标签样式</h2><p>修改Blog\themes\next\layout_macro\post.swig中文件，command+f搜索<code>rel=&quot;tag&quot;&gt;#</code>，将#替换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code>。输入以下命令，查看效果：</p><h2 id="侧边栏社交小图标设置"><a href="#侧边栏社交小图标设置" class="headerlink" title="侧边栏社交小图标设置"></a>侧边栏社交小图标设置</h2><p>social:</p><h2 id="网站底部加上访问量"><a href="#网站底部加上访问量" class="headerlink" title="网站底部加上访问量"></a>网站底部加上访问量</h2><p>  在themes/next/layout/_partials/footer.swig第一行加上</p><pre><code>&lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;busuanzi_count:  enable: true</code></pre><h2 id="统计博客全站字数"><a href="#统计博客全站字数" class="headerlink" title="统计博客全站字数"></a>统计博客全站字数</h2><blockquote><p>npm install hexo-wordcount –save</p></blockquote><p>/themes/next/layout/_partials/footer.swig</p><pre><code>&lt;div class=&quot;theme-info&quot;&gt;  &lt;div class=&quot;powered-by&quot;&gt;&lt;/div&gt;  &lt;span class=&quot;post-count&quot;&gt;博客全站共{{ totalcount(site) }}字&lt;/span&gt;&lt;/div&gt;symbols_count_time:    item_text_total: true</code></pre><h2 id="统计文章字数、阅读时间"><a href="#统计文章字数、阅读时间" class="headerlink" title="统计文章字数、阅读时间"></a>统计文章字数、阅读时间</h2><pre><code>&lt;span class=&quot;post-count&quot;&gt; &amp;nbsp | &amp;nbsp &lt;i class=&quot;fa fa-print&quot;&gt;&lt;/i&gt; 字数统计：{{ wordcount(post.content) }}&lt;/span&gt;&lt;span class=&quot;post-count&quot;&gt; &amp;nbsp | &amp;nbsp &lt;i class=&quot;fa fa-clock&quot;&gt;&lt;/i&gt; 阅读时长≈{{ min2read(post.content, {cn: 300, en: 160}) }}分钟&lt;/span&gt;# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount:  item_text: true  wordcount: true # 字数统计  min2read: true # 预计阅读时长  totalcount: true # 总字数统计  separated_meta: true</code></pre><h2 id="添加网页顶部进度加载条"><a href="#添加网页顶部进度加载条" class="headerlink" title="添加网页顶部进度加载条"></a>添加网页顶部进度加载条</h2><p>编辑主题配置文件，command+F搜索pace，将其值改为ture就可以了，选择一款你喜欢的样式。<br>Installation 参考：<a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-pace</a></p><pre><code>pace: true</code></pre><h2 id="浏览页面的时候显示当前浏览进度"><a href="#浏览页面的时候显示当前浏览进度" class="headerlink" title="浏览页面的时候显示当前浏览进度"></a>浏览页面的时候显示当前浏览进度</h2><pre><code># Scroll percent label in b2t button.scrollpercent: true</code></pre><h2 id="添加基于Valine的评论模块"><a href="#添加基于Valine的评论模块" class="headerlink" title="添加基于Valine的评论模块"></a>添加基于<a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a>的评论模块</h2><h2 id="添加基于Mob-ShareSDK的分享功能"><a href="#添加基于Mob-ShareSDK的分享功能" class="headerlink" title="添加基于Mob ShareSDK的分享功能"></a>添加基于<a href="http://www.mob.com/" target="_blank" rel="noopener">Mob ShareSDK</a>的分享功能</h2><p>参考：<a href="https://hadronw.com/2018/05-28/hexo-addshares/" target="_blank" rel="noopener">https://hadronw.com/2018/05-28/hexo-addshares/</a></p><h2 id="博文置顶"><a href="#博文置顶" class="headerlink" title="博文置顶"></a>博文置顶</h2><ul><li>修改hexo-generator-index插件，把node_modules/hexo-generator-index/lib/generator.js中代码替换为：</li></ul><pre><code>&apos;use strict&apos;;var pagination = require(&apos;hexo-pagination&apos;);module.exports = function(locals){  var config = this.config;  var posts = locals.posts;    posts.data = posts.data.sort(function(a, b) {        if(a.top &amp;&amp; b.top) { // 两篇文章top都有定义            if(a.top == b.top) return b.date - a.date; // 若top值一样则按照文章日期降序排            else return b.top - a.top; // 否则按照top值降序排        }        else if(a.top &amp;&amp; !b.top) { // 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）            return -1;        }        else if(!a.top &amp;&amp; b.top) {            return 1;        }        else return b.date - a.date; // 都没定义按照文章日期降序排    });  var paginationDir = config.pagination_dir || &apos;page&apos;;  return pagination(&apos;&apos;, posts, {    perPage: config.index_generator.per_page,    layout: [&apos;index&apos;, &apos;archive&apos;],    format: paginationDir + &apos;/%d/&apos;,    data: {      __index: true    }  });};</code></pre><ul><li>文章添加Top值，值越大，越靠前：</li></ul><pre><code class="markdown">---title: Hexo-NexT主题配置date: 2018-01-20 20:41:08categories: Hexotags:<span class="bullet">- </span>Hexo<span class="bullet">- </span>NexTtop: 100---    </code></pre><h2 id="添加侧栏推荐阅读"><a href="#添加侧栏推荐阅读" class="headerlink" title="添加侧栏推荐阅读"></a>添加侧栏推荐阅读</h2><p>编辑主题配置文件，如下配置即可：</p><pre><code># Blog rollslinks_icon: linklinks_title: 推荐阅读#links_layout: blocklinks_layout: inlinelinks:  Swift 4: https://developer.apple.com/swift/  Objective-C: https://developer.apple.com/documentation/objectivec</code></pre><h2 id="修改字体大小"><a href="#修改字体大小" class="headerlink" title="修改字体大小"></a>修改字体大小</h2><p>编辑Blog/themes/next/source/css/_variables/base.styl，command+F搜索$font-size-base，修改为你想要的大小：</p><pre><code>// Font size$font-size-base           = 16px</code></pre><h2 id="在文章底部增加版权信息"><a href="#在文章底部增加版权信息" class="headerlink" title="在文章底部增加版权信息"></a>在文章底部增加版权信息</h2><ul><li>在目录Blog/themes/next/layout/_macro/，添加文件 my-copyright.swig，内容如下：<a href="../../themes/next/layout/_macro/my-copyright.swig">my-copyright.swig</a></li><li>在目录Blog/themes/next/source/css/_common/components/post/下添加文件my-post-copyright.styl，添加以下代码：<a href="../../themes/next/source/css/_common/components/post/my-post-copyright.styl">my-post-copyright.styl</a></li><li>修改Blog/themes/next/layout/_macro/post.swig，在如图位置添加以下代码：    </li></ul><pre><code>&lt;div&gt;      {% if not is_index %}            {% include 'my-copyright.swig' %}          {% endif %}&lt;/div&gt;</code></pre><ul><li>在Blog/themes/next/source/css/_common/components/post/post.styl文件最后加入下面的代码：</li></ul><pre><code>@import &quot;my-post-copyright&quot;    </code></pre><ul><li>在Markdown文章中加入  copyright : ture</li></ul><pre><code class="markdown">---title: Hexo-NexT主题配置date: 2018-01-20 20:41:08categories: Hexotags:<span class="bullet">- </span>Hexo<span class="bullet">- </span>NexTtop: 100copyright: ture---</code></pre><ul><li>配置根目录下的_config.yml文件，配置为：</li></ul><pre><code># URL## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;url: http://tianbin.orgroot: /permalink: :year/:month/:day/:title/permalink_defaults:</code></pre><h2 id="Hexo博客添加站内搜索"><a href="#Hexo博客添加站内搜索" class="headerlink" title="Hexo博客添加站内搜索"></a>Hexo博客添加站内搜索</h2><ul><li>NexT主题支持集成 Swiftype、 微搜索、Local Search 和 Algolia。下面介绍Local Search的安装吧。</li><li>安装 hexo-generator-search<blockquote><p> npm install hexo-generator-search –save</p></blockquote></li><li>安装 hexo-generator-searchdb<blockquote><p> npm install hexo-generator-searchdb –save</p></blockquote></li><li>打开local_search</li></ul><pre><code>local_search:  enable: ture</code></pre><h2 id="为文章中的代码块增加一键复制功能"><a href="#为文章中的代码块增加一键复制功能" class="headerlink" title="为文章中的代码块增加一键复制功能"></a>为文章中的代码块增加一键复制功能</h2><pre><code>copy_button:  enable: true</code></pre><h2 id="404公益页面"><a href="#404公益页面" class="headerlink" title="404公益页面"></a>404公益页面</h2><ul><li>在source下新建404.md</li></ul><pre><code>---comments: false---&lt;script type=&quot;text/javascript&quot; src=&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot; homepagename=&apos;返回主页&apos; homepageurl=&quot;/&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;         </code></pre><ul><li>修改theme/_config.yml</li></ul><pre><code>menu:      commonweal: /404/ || heartbeat</code></pre><h1 id="自动备份Hexo博客源文件"><a href="#自动备份Hexo博客源文件" class="headerlink" title="自动备份Hexo博客源文件"></a>自动备份Hexo博客源文件</h1><p>参考：<a href="https://notes.doublemine.me/2015-07-06-%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BDHexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6.html" target="_blank" rel="noopener">备份Hexo博客源文件</a></p><ul><li><p>安装shelljs模块</p><blockquote><p>npm install –save shelljs</p></blockquote></li><li><p>编写脚本文件，内容如下：<a href="../../scripts/auto_backup_script.js">auto_backup_script.js</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装node&quot;&gt;&lt;a href=&quot;#安装node&quot; class=&quot;headerlink&quot; title=&quot;安装node&quot;&gt;&lt;/a&gt;安装node&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://nodejs.org/en/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;npm -v&lt;br&gt;node -v&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="杂" scheme="https://tianbin.org/categories/%E6%9D%82/"/>
    
    
      <category term="hexo" scheme="https://tianbin.org/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo启用cdn加速</title>
    <link href="https://tianbin.org/83f2d349-cdn/"/>
    <id>https://tianbin.org/83f2d349-cdn/</id>
    <published>2019-06-29T05:47:17.723Z</published>
    <updated>2019-06-29T05:47:17.723Z</updated>
    
    <content type="html"><![CDATA[<p>参考：<a href="https://shup.cn/2017/11/21/cdn.html" target="_blank" rel="noopener">https://shup.cn/2017/11/21/cdn.html</a></p><a id="more"></a><h1 id="分析：哪些因素会影响加载速度？"><a href="#分析：哪些因素会影响加载速度？" class="headerlink" title="分析：哪些因素会影响加载速度？"></a>分析：哪些因素会影响加载速度？</h1><h2 id="js文件"><a href="#js文件" class="headerlink" title="js文件"></a>js文件</h2><p>js文件就是JavaScript脚本文件，用来实现各种酷炫的动态效果。一般是加载在html页面的<head><meta name="generator" content="Hexo 3.9.0">部分，所以页面加载速度首先要考虑这一块。Hexo的js文件大致包含以下3类：</head></p><ol><li>公共js<br>公共js是通用型，比如实现图片放大效果的Fancybox，或者实现图片慢加载的LazyLoad等等。这些js已经开发好，直接在html里引用(存放在镜像网站上，如<a href="https://www.bootcdn.cn/" target="_blank" rel="noopener">BootCDN</a>)js文件链接即可实现效果。</li><li>定制页面效果js<br>即NexT主题中定制的某些特效，例如实现页面响应式效果的Bootstrap，或者增强移动端滚动及动画效果的Motion等等。这些js理论上也是公共js，只不过NexT主题作者修改了代码，以适用于NexT主题。这些js文件存放在本地Hexo目录hexo\themes\next\source\js\src下。</li><li>第三方插件js<br>这个不用多说了吧，Hexo默认安装了不少实用的第三方插件，比如，可直接在网页中显示数学公式的MathJax，优化SEO的Baidu-push等等。这些插件可在主题配置文件_config.yml中进行配置。相关js文件有些存放在hexo\themes\next\layout_third-party中，有些则通过外部引用形式加载。<h2 id="图片-音、视频"><a href="#图片-音、视频" class="headerlink" title="图片(音、视频)"></a>图片(音、视频)</h2>如果博客文章很多，绝大部分的带宽都会消耗在这部分静态数据上。这个不多说了。</li></ol><h1 id="解决：逐个优化"><a href="#解决：逐个优化" class="headerlink" title="解决：逐个优化"></a>解决：逐个优化</h1><h2 id="公共js加速"><a href="#公共js加速" class="headerlink" title="公共js加速"></a>公共js加速</h2><p>修改<a href="../../themes/next/_config.yml">_config.yml</a>中vendors的配置<br>全部映射到BootCDN上去</p><h2 id="第三方js文件、图片-音、视频-加速"><a href="#第三方js文件、图片-音、视频-加速" class="headerlink" title="第三方js文件、图片(音、视频)加速"></a>第三方js文件、图片(音、视频)加速</h2><p>我用的七牛云，<a href="https://blog.qiniu.com/archives/8874" target="_blank" rel="noopener">每月 10 G的标准存储 CDN 回源流量免费额度</a><a href="https://blog.qiniu.com/archives/8874)。" target="_blank" rel="noopener">https://blog.qiniu.com/archives/8874)。</a><br><img src="../image/83f2d349-1.png" alt="七牛云"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;参考：&lt;a href=&quot;https://shup.cn/2017/11/21/cdn.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://shup.cn/2017/11/21/cdn.html&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂" scheme="https://tianbin.org/categories/%E6%9D%82/"/>
    
    
      <category term="hexo" scheme="https://tianbin.org/tags/hexo/"/>
    
      <category term="网络" scheme="https://tianbin.org/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>Hexo启用https加密连接</title>
    <link href="https://tianbin.org/a2a28780-https/"/>
    <id>https://tianbin.org/a2a28780-https/</id>
    <published>2019-06-29T04:59:40.722Z</published>
    <updated>2019-06-29T04:59:40.722Z</updated>
    
    <content type="html"><![CDATA[<p>参考：<a href="https://www.jianshu.com/p/509d2a240b7d" target="_blank" rel="noopener">https://www.jianshu.com/p/509d2a240b7d</a></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;参考：&lt;a href=&quot;https://www.jianshu.com/p/509d2a240b7d&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.jianshu.com/p/509d2a240b7d&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂" scheme="https://tianbin.org/categories/%E6%9D%82/"/>
    
    
      <category term="hexo" scheme="https://tianbin.org/tags/hexo/"/>
    
      <category term="网络" scheme="https://tianbin.org/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
</feed>
